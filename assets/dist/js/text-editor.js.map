{"version":3,"file":"text-editor.js","sources":["../../modules/bluecadet_utilities/assets/src/js/text-editor.js"],"sourcesContent":["(function ($) {\n  Drupal.behaviors.nhmUtilityTextEditor = {\n    attach: function (context, settings) {\n      initEditor();\n    }\n  };\n\n  function initEditor() {\n    $('.text-format-editor').each(function () {\n      var $field = $(this);\n\n      var $defaultValue = $field.val();\n      // OLD version used 'data-drupal-selector', but that doesn't add the AJAX random id\n      // var editorName = $field.attr('data-drupal-selector');\n      var editorName = $field.attr('id');\n      if (editorName) {\n        var $editor = CKEDITOR.instances[editorName];\n\n        if ($editor && !$field.hasClass('text-editor-process')) {\n          $field.addClass('text-editor-process');\n          $editor.setData($defaultValue);\n          $editor.on('change', function () {\n\n            var editorData = this.getData();\n\n            $field.val(editorData).attr('data-editor-value-original', editorData);\n          });\n\n          $editor.on('destroy', function (event) {\n            $field.removeClass('text-editor-process');\n          });\n        }\n      }\n    });\n  }\n\n  $(document).ajaxSuccess(function (event, xhr, settings) {\n    var url = settings.url;\n\n    if (url.indexOf('editor/filter_xss') >= 0) {\n      initEditor();\n    }\n  });\n\n})(jQuery);"],"names":["$","Drupal","behaviors","nhmUtilityTextEditor","attach","context","settings","initEditor","each","$field","$defaultValue","val","editorName","attr","$editor","CKEDITOR","instances","hasClass","addClass","setData","on","editorData","getData","event","removeClass","document","ajaxSuccess","xhr","url","indexOf","jQuery"],"mappings":"AAAA,CAAC,UAAUA,CAAV,EAAa;EACZC,MAAM,CAACC,SAAP,CAAiBC,oBAAjB,GAAwC;IACtCC,MAAM,EAAE,UAAUC,OAAV,EAAmBC,QAAnB,EAA6B;MACnCC,UAAU;;GAFd;;WAMSA,UAAT,GAAsB;IACpBP,CAAC,CAAC,qBAAD,CAAD,CAAyBQ,IAAzB,CAA8B,YAAY;UACpCC,MAAM,GAAGT,CAAC,CAAC,IAAD,CAAd;UAEIU,aAAa,GAAGD,MAAM,CAACE,GAAP,EAApB,CAHwC;;;UAMpCC,UAAU,GAAGH,MAAM,CAACI,IAAP,CAAY,IAAZ,CAAjB;;UACID,UAAJ,EAAgB;YACVE,OAAO,GAAGC,QAAQ,CAACC,SAAT,CAAmBJ,UAAnB,CAAd;;YAEIE,OAAO,IAAI,CAACL,MAAM,CAACQ,QAAP,CAAgB,qBAAhB,CAAhB,EAAwD;UACtDR,MAAM,CAACS,QAAP,CAAgB,qBAAhB;UACAJ,OAAO,CAACK,OAAR,CAAgBT,aAAhB;UACAI,OAAO,CAACM,EAAR,CAAW,QAAX,EAAqB,YAAY;gBAE3BC,UAAU,GAAG,KAAKC,OAAL,EAAjB;YAEAb,MAAM,CAACE,GAAP,CAAWU,UAAX,EAAuBR,IAAvB,CAA4B,4BAA5B,EAA0DQ,UAA1D;WAJF;UAOAP,OAAO,CAACM,EAAR,CAAW,SAAX,EAAsB,UAAUG,KAAV,EAAiB;YACrCd,MAAM,CAACe,WAAP,CAAmB,qBAAnB;WADF;;;KApBN;;;EA4BFxB,CAAC,CAACyB,QAAD,CAAD,CAAYC,WAAZ,CAAwB,UAAUH,KAAV,EAAiBI,GAAjB,EAAsBrB,QAAtB,EAAgC;QAClDsB,GAAG,GAAGtB,QAAQ,CAACsB,GAAnB;;QAEIA,GAAG,CAACC,OAAJ,CAAY,mBAAZ,KAAoC,CAAxC,EAA2C;MACzCtB,UAAU;;GAJd;CApCF,EA4CGuB,MA5CH"}