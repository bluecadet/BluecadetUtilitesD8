{"version":3,"file":"text-editor.js","sources":["../../modules/bluecadet_utilities/assets/src/js/text-editor.js"],"sourcesContent":["(function ($) {\n  Drupal.behaviors.nhmUtilityTextEditor = {\n    attach: function (context, settings) {\n      initEditor();\n    }\n  };\n\n  function initEditor() {\n    $('.text-format-editor').each(function () {\n      var $field = $(this);\n\n      var $defaultValue = $field.val();\n      // OLD version used 'data-drupal-selector', but that doesn't add the AJAX random id\n      // var editorName = $field.attr('data-drupal-selector');\n      var editorName = $field.attr('id');\n      if (editorName) {\n        var $editor = CKEDITOR.instances[editorName];\n\n        if ($editor && !$field.hasClass('text-editor-process')) {\n          $field.addClass('text-editor-process');\n          $editor.setData($defaultValue);\n          $editor.on('change', function () {\n\n            var editorData = this.getData();\n\n            $field.val(editorData).attr('data-editor-value-original', editorData);\n          });\n\n          $editor.on('destroy', function (event) {\n            $field.removeClass('text-editor-process');\n          });\n        }\n      }\n    });\n  }\n\n  $(document).ajaxSuccess(function (event, xhr, settings) {\n    var url = settings.url;\n\n    if (url.indexOf('editor/filter_xss') >= 0) {\n      initEditor();\n    }\n  });\n\n})(jQuery);"],"names":["$","Drupal","behaviors","nhmUtilityTextEditor","attach","context","settings","initEditor","each","$field","$defaultValue","val","editorName","attr","$editor","CKEDITOR","instances","hasClass","addClass","setData","on","editorData","getData","event","removeClass","document","ajaxSuccess","xhr","url","indexOf","jQuery"],"mappings":"AAAA,CAAC,UAAUA,CAAV,EAAa;AACZC,EAAAA,MAAM,CAACC,SAAP,CAAiBC,oBAAjB,GAAwC;AACtCC,IAAAA,MAAM,EAAE,UAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AACnCC,MAAAA,UAAU;AACX;AAHqC,GAAxC;;AAMA,WAASA,UAAT,GAAsB;AACpBP,IAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBQ,IAAzB,CAA8B,YAAY;AACxC,UAAIC,MAAM,GAAGT,CAAC,CAAC,IAAD,CAAd;AAEA,UAAIU,aAAa,GAAGD,MAAM,CAACE,GAAP,EAApB,CAHwC;AAKxC;;AACA,UAAIC,UAAU,GAAGH,MAAM,CAACI,IAAP,CAAY,IAAZ,CAAjB;;AACA,UAAID,UAAJ,EAAgB;AACd,YAAIE,OAAO,GAAGC,QAAQ,CAACC,SAAT,CAAmBJ,UAAnB,CAAd;;AAEA,YAAIE,OAAO,IAAI,CAACL,MAAM,CAACQ,QAAP,CAAgB,qBAAhB,CAAhB,EAAwD;AACtDR,UAAAA,MAAM,CAACS,QAAP,CAAgB,qBAAhB;AACAJ,UAAAA,OAAO,CAACK,OAAR,CAAgBT,aAAhB;AACAI,UAAAA,OAAO,CAACM,EAAR,CAAW,QAAX,EAAqB,YAAY;AAE/B,gBAAIC,UAAU,GAAG,KAAKC,OAAL,EAAjB;AAEAb,YAAAA,MAAM,CAACE,GAAP,CAAWU,UAAX,EAAuBR,IAAvB,CAA4B,4BAA5B,EAA0DQ,UAA1D;AACD,WALD;AAOAP,UAAAA,OAAO,CAACM,EAAR,CAAW,SAAX,EAAsB,UAAUG,KAAV,EAAiB;AACrCd,YAAAA,MAAM,CAACe,WAAP,CAAmB,qBAAnB;AACD,WAFD;AAGD;AACF;AACF,KAzBD;AA0BD;;AAEDxB,EAAAA,CAAC,CAACyB,QAAD,CAAD,CAAYC,WAAZ,CAAwB,UAAUH,KAAV,EAAiBI,GAAjB,EAAsBrB,QAAtB,EAAgC;AACtD,QAAIsB,GAAG,GAAGtB,QAAQ,CAACsB,GAAnB;;AAEA,QAAIA,GAAG,CAACC,OAAJ,CAAY,mBAAZ,KAAoC,CAAxC,EAA2C;AACzCtB,MAAAA,UAAU;AACX;AACF,GAND;AAQD,CA5CD,EA4CGuB,MA5CH"}